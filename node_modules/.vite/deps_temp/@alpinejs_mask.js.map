{
  "version": 3,
  "sources": ["../../@alpinejs/mask/dist/module.esm.js", "dep:@alpinejs_mask"],
  "sourcesContent": ["// packages/mask/src/index.js\nfunction src_default(Alpine) {\n  Alpine.directive(\"mask\", (el, {value, expression}, {effect, evaluateLater}) => {\n    let templateFn = () => expression;\n    let lastInputValue = \"\";\n    if ([\"function\", \"dynamic\"].includes(value)) {\n      let evaluator = evaluateLater(expression);\n      effect(() => {\n        templateFn = (input) => {\n          let result;\n          Alpine.dontAutoEvaluateFunctions(() => {\n            evaluator((value2) => {\n              result = typeof value2 === \"function\" ? value2(input) : value2;\n            }, {scope: {\n              $input: input,\n              $money: formatMoney.bind({el})\n            }});\n          });\n          return result;\n        };\n        processInputValue(el);\n      });\n    } else {\n      processInputValue(el);\n    }\n    el.addEventListener(\"input\", () => processInputValue(el));\n    el.addEventListener(\"blur\", () => processInputValue(el, false));\n    function processInputValue(el2, shouldRestoreCursor = true) {\n      let input = el2.value;\n      let template = templateFn(input);\n      if (!template || template === \"false\")\n        return false;\n      if (lastInputValue.length - el2.value.length === 1) {\n        return lastInputValue = el2.value;\n      }\n      let setInput = () => {\n        lastInputValue = el2.value = formatInput(input, template);\n      };\n      if (shouldRestoreCursor) {\n        restoreCursorPosition(el2, template, () => {\n          setInput();\n        });\n      } else {\n        setInput();\n      }\n    }\n    function formatInput(input, template) {\n      if (input === \"\")\n        return \"\";\n      let strippedDownInput = stripDown(template, input);\n      let rebuiltInput = buildUp(template, strippedDownInput);\n      return rebuiltInput;\n    }\n  });\n}\nfunction restoreCursorPosition(el, template, callback) {\n  let cursorPosition = el.selectionStart;\n  let unformattedValue = el.value;\n  callback();\n  let beforeLeftOfCursorBeforeFormatting = unformattedValue.slice(0, cursorPosition);\n  let newPosition = buildUp(template, stripDown(template, beforeLeftOfCursorBeforeFormatting)).length;\n  el.setSelectionRange(newPosition, newPosition);\n}\nfunction stripDown(template, input) {\n  let inputToBeStripped = input;\n  let output = \"\";\n  let regexes = {\n    \"9\": /[0-9]/,\n    a: /[a-zA-Z]/,\n    \"*\": /[a-zA-Z0-9]/\n  };\n  let wildcardTemplate = \"\";\n  for (let i = 0; i < template.length; i++) {\n    if ([\"9\", \"a\", \"*\"].includes(template[i])) {\n      wildcardTemplate += template[i];\n      continue;\n    }\n    for (let j = 0; j < inputToBeStripped.length; j++) {\n      if (inputToBeStripped[j] === template[i]) {\n        inputToBeStripped = inputToBeStripped.slice(0, j) + inputToBeStripped.slice(j + 1);\n        break;\n      }\n    }\n  }\n  for (let i = 0; i < wildcardTemplate.length; i++) {\n    let found = false;\n    for (let j = 0; j < inputToBeStripped.length; j++) {\n      if (regexes[wildcardTemplate[i]].test(inputToBeStripped[j])) {\n        output += inputToBeStripped[j];\n        inputToBeStripped = inputToBeStripped.slice(0, j) + inputToBeStripped.slice(j + 1);\n        found = true;\n        break;\n      }\n    }\n    if (!found)\n      break;\n  }\n  return output;\n}\nfunction buildUp(template, input) {\n  let clean = Array.from(input);\n  let output = \"\";\n  for (let i = 0; i < template.length; i++) {\n    if (![\"9\", \"a\", \"*\"].includes(template[i])) {\n      output += template[i];\n      continue;\n    }\n    if (clean.length === 0)\n      break;\n    output += clean.shift();\n  }\n  return output;\n}\nfunction formatMoney(input, delimeter = \".\", thousands) {\n  thousands = delimeter === \",\" && thousands === void 0 ? \".\" : \",\";\n  let addThousands = (input2, thousands2) => {\n    let output = \"\";\n    let counter = 0;\n    for (let i = input2.length - 1; i >= 0; i--) {\n      if (input2[i] === thousands2)\n        continue;\n      if (counter === 3) {\n        output = input2[i] + thousands2 + output;\n        counter = 0;\n      } else {\n        output = input2[i] + output;\n      }\n      counter++;\n    }\n    return output;\n  };\n  let strippedInput = input.replaceAll(new RegExp(`[^0-9\\\\${delimeter}]`, \"g\"), \"\");\n  let template = Array.from({length: strippedInput.split(delimeter)[0].length}).fill(\"9\").join(\"\");\n  template = addThousands(template, thousands);\n  if (input.includes(delimeter))\n    template += `${delimeter}99`;\n  queueMicrotask(() => {\n    if (this.el.value.endsWith(delimeter))\n      return;\n    if (this.el.value[this.el.selectionStart - 1] === delimeter) {\n      this.el.setSelectionRange(this.el.selectionStart - 1, this.el.selectionStart - 1);\n    }\n  });\n  return template;\n}\n\n// packages/mask/builds/module.js\nvar module_default = src_default;\nexport {\n  module_default as default,\n  stripDown\n};\n", "import d from \"./node_modules/@alpinejs/mask/dist/module.esm.js\";export default d;\nexport * from \"./node_modules/@alpinejs/mask/dist/module.esm.js\""],
  "mappings": "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",
  "names": []
}
